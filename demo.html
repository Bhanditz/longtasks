
<!DOCTYPE HTML>
<meta charset=utf-8>
<title>Long Task Demo</title>

<head>
<link rel=stylesheet href=style.css>
<script src="slow.js"></script>

</head>

<body>
<button id="1" onClick="handleClick(event, this.id)">[Parent] Make Slow Task</button>

<div id="eventlog" class="eventLog" style="width: 90%; height: 200px;  border: 1px solid;"></div>

<iframe src="demo-child.html" style="width: 90%; height: 300px" name="childA"></iframe>

<iframe src="https://w3.org" style="width: 90%; height: 300px" name="wikiKitty"></iframe>

<script>
    var observer = new PerformanceObserver(function(entryList) {
      var entry = entryList.getEntries()[0];
      var logBox = document.getElementById('eventlog');
      if (logBox && entry.entryType == "longtask") {
        var logLine = "long task! " + " duration: " + entry.duration.toLocaleString() + " start: " + entry.startTime.toLocaleString() +  " name: "  + entry.name + " <br>";
        logBox.innerHTML = logLine + logBox.innerHTML;
      };
    });

    observer.observe({entryTypes: ["longtask"]});
</script>

<script>
    var begin = window.performance.now();
    while (window.performance.now() < begin + 400);
</script>

</body>
