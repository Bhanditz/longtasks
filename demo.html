
<!DOCTYPE HTML>
<head>
<meta charset=utf-8>
<meta http-equiv="origin-trial" content="Aq8QDT0tjerxoPx2KGlNVwdkrRTldXUcj0TI3Rdvw/I771OHtpORM6yML/fe8JntQJM6nlqVZDnrZkUQFVnZ0QQAAABieyJvcmlnaW4iOiAiaHR0cHM6Ly9zcGFuaWNrZXIuZ2l0aHViLmlvOjQ0MyIsICJmZWF0dXJlIjogIkxvbmdUYXNrT2JzZXJ2ZXIiLCAiZXhwaXJ5IjogMTQ3OTI2OTc0N30=">

<title>Long Task Demo</title>
<link rel=stylesheet href=style.css>
<script src="slow.js"></script>
</head>

<body>
<button id="1" onClick="handleClick(event, this.id)">[Parent] Make Slow Task</button>

<div id="eventlog" class="eventLog" style="width: 90%; height: 200px;  border: 1px solid;"></div>

<iframe src="demo-child.html" style="width: 90%; height: 300px" name="childA"></iframe>

<iframe src="https://en.wikipedia.org/wiki/Xyzzy" style="width: 90%; height: 300px" name="wikiKitty"></iframe>

<script>
    var observer = new PerformanceObserver(function(entryList) {
      var entry = entryList.getEntries()[0];
      var logBox = document.getElementById('eventlog');
      if (logBox && entry.entryType == "longtask") {
        var newItem = "long task! " + "start: " + entry.startTime + ", duration: " + (entry.duration / 1000) + "ms, name: " + entry.name + "<br>";
        logBox.innerHTML = newItem + logBox.innerHTML;
      };
    });

    observer.observe({entryTypes: ["longtask"]});
</script>

<script>
    var begin = window.performance.now();
    while (window.performance.now() < begin + 400);
</script>

</body>
